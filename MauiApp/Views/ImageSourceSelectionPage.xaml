<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="MauiApp.Views.ImageSourceSelectionPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             BackgroundColor="Transparent"
             Title="">

    <Grid>
        <BoxView BackgroundColor="Transparent" 
                 VerticalOptions="FillAndExpand" 
                 HorizontalOptions="FillAndExpand"
                
                 InputTransparent="False"
                 Margin="0,0,0,250">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding DismissCommand}" 
                                      NumberOfTapsRequired="1" />
            </BoxView.GestureRecognizers>
        </BoxView>

        <Border x:Name="Sheet" 
                StrokeShape="RoundRectangle 16,16,0,0" 
                VerticalOptions="End" 
                HorizontalOptions="FillAndExpand" 
                Margin="0,0,0,0"
                Padding="0"
                HeightRequest="250"
                StrokeThickness="0">

            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <GradientStop Color="{StaticResource TopCoral}" Offset="0.0" />
                    <GradientStop Color="{StaticResource BottomCoral}" Offset="1.0" />
                </LinearGradientBrush>
            </Border.Background>

            <Border.GestureRecognizers>
                <PanGestureRecognizer PanUpdated="OnPanUpdated" />
                <TapGestureRecognizer Tapped="OnSheetTapped" />
            </Border.GestureRecognizers>

            <Grid RowDefinitions="Auto,Auto,*">
                <BoxView Grid.Row="0" 
                         BackgroundColor="White" 
                         WidthRequest="40" 
                         HeightRequest="4" 
                         HorizontalOptions="Center" 
                         Margin="0,12,0,8" />

                <Grid Grid.Row="1" Padding="24,8,24,16">
                    <Label Text="Select Image Source" 
                           FontSize="20" 
                           FontAttributes="Bold"
                           TextColor="White" 
                           VerticalOptions="Center"
                           HorizontalOptions="Center" />
                </Grid>

                <Grid Grid.Row="2" 
                      VerticalOptions="FillAndExpand"
                      Margin="24,0,24,32">
                    <Border BackgroundColor="White" 
                            Stroke="Transparent" 
                            StrokeThickness="0" 
                            StrokeShape="RoundRectangle 12">

                        <StackLayout Spacing="0">
                            <Grid Padding="20,20" ColumnDefinitions="Auto,*">
                                <Grid.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding SelectGalleryCommand}" />
                                </Grid.GestureRecognizers>

                                <Label Grid.Column="0" 
                                       Text="ðŸ“·" 
                                       FontSize="24" 
                                       VerticalOptions="Center"
                                       Margin="0,0,16,0" />

                                <Label Grid.Column="1" 
                                       Text="Gallery" 
                                       FontSize="18" 
                                       TextColor="Black" 
                                       VerticalOptions="Center" />
                            </Grid>

                            <BoxView BackgroundColor="#F0F0F0"
                                     HeightRequest="1"
                                     Margin="20,0"
                                     HorizontalOptions="FillAndExpand" />

                            <Grid Padding="20,20" ColumnDefinitions="Auto,*">
                                <Grid.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding SelectCameraCommand}" />
                                </Grid.GestureRecognizers>

                                <Label Grid.Column="0" 
                                       Text="ðŸ“¸" 
                                       FontSize="24" 
                                       VerticalOptions="Center"
                                       Margin="0,0,16,0" />

                                <Label Grid.Column="1" 
                                       Text="Camera" 
                                       FontSize="18" 
                                       TextColor="Black" 
                                       VerticalOptions="Center" />
                            </Grid>
                        </StackLayout>
                    </Border>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</ContentPage>
